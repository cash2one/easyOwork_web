<div id="page-wrapper" ng-controller="addpcsCtrl"  ng-init="initFun()">
    <!--主要内容-->
    <div class="payetilebox">
        <div class="f_r mt5"><!--<a class="iconfont icon-fanhui f22" back-button title="返回"></a>--> <a class="iconfont icon-shuaxin f22 ml15" reload-route title="刷新"></a></div>
        <ul>
            <li class="active">新建流程</li>
        </ul>
    </div>
    <ol class="breadbox">
        <li>工作面板</li>
        <li>审批流程</li>
        <li class="active">新建流程</li>
    </ol>
    <div class="nose-panel">
        <div class="p30 pb10 addpcs-config">
            <div class="pct60  f12">
                <div class="cf mb10">
                    <div class="col-xs-2 t_r pt7 g9">流程类型</div>
                    <div class="col-xs-10 form-inline">
                        <button class="btn btn-default mr5" ng-repeat="data in prosclasslist" ng-model="$parent.pcsclass" btn-radio="'{{data.name}}'">{{data.name}}</button>
                    </div>

                </div>
                <div class="cf mb10">
                    <div class="col-xs-2 t_r pt7 g9">选择流程</div>
                    <div class="col-xs-10 form-inline">
                        <!--{{processmodal}}-->
                        <button class="btn btn-default mr5" ng-repeat="ModelData in inquiryProcessModelData | filter:{'processType':pcsclass}" ng-model="$parent.processmodal" btn-radio="{{ModelData}}">{{ModelData.name}}</button>
                    </div>
                </div>
                <div class="cf mb10">
                    <div class="col-xs-2 t_r pt7 g9">流程描述</div>
                    <div class="col-xs-10"><textarea class="form-control" cols="6" disabled placeholder="简要的流程描述" ng-model="processmodal.description"></textarea></div>
                </div>
                <div class="cf mb10">
                    <div class="col-xs-2 t_r pt7 g9">适用人员</div>
                    <div class="col-xs-10">
                        <ul class="addpcs-config-prople cf">
                            <li  class="bdrs4 ng-binding ng-scope" ng-repeat="data in processmodal.roleDTOList">{{data.name}}</li>
                            <li  class="bdrs4 ng-binding ng-scope" ng-repeat="data in processmodal.userDTOList">{{data.name}}</li>
                        </ul>
                    </div>
                </div>
                <div class="cf mb10">
                    <div class="col-xs-2 t_r pt7 g9">流程名称</div>
                    <div class="col-xs-10">
                        <input type="text" class="form-control" ng-model="processmodal.title" placeholder="输入您新建的流程名称">
                    </div>
                </div>
            </div>
            <div class="mb15 f12 bg-fafafa">
                <div class="cf pt5 pb10">
                    <div class="col-xs-2 t_r pt7 f16">流程数据</div>
                </div>
            </div>
            <div class="pct60 f12">
                <div class="cf fadecj addrow mb10" ng-repeat="obj in processmodal.processDefFieldDTOList">
                    <span class="pace-inactive">{{obj.seqNo=$index+1}}</span>
                    <div ng-switch on="obj.type">
                        <div ng-switch-when="TEXT">
                            <div class="col-xs-2 t_r pt7 g9"><span class="red" ng-if="obj.mandatory==true">*</span>{{obj.name || '无'}}</div>
                            <div class="col-xs-10"><input type="text" class="form-control wd200" placeholder="{{obj.placeholder || '无'}}" ng-model="obj.value"></div>
                        </div>
                        <div ng-switch-when="NUMBER">
                            <div class="col-xs-2 t_r pt7 g9"><span class="red" ng-if="obj.mandatory==true">*</span>{{obj.name || '无'}}</div>
                            <div class="col-xs-10"><input type="number" class="form-control wd200" placeholder="{{obj.placeholder || '无'}}" ng-model="obj.value"></div>
                        </div>

                        <div ng-switch-when="TEXTAREA">
                            <div class="col-xs-2 t_r pt7 g9"><span class="red" ng-if="obj.mandatory==true">*</span>{{obj.name || '无'}}</div>
                            <div class="col-xs-10"><textarea class="form-control wd300" placeholder="{{obj.placeholder || '无'}}" ng-model="obj.value"></textarea></div>
                        </div>

                        <div ng-switch-when="SELECTION">
                            
                            <div class="col-xs-2 t_r pt7 g9"><span class="red" ng-if="obj.mandatory==true">*</span>{{obj.name || '无'}}</div>
                            <div class="col-xs-10"><select class="form-control wd200" ng-model="obj.valueList[0]" ng-options="x.value for x in obj.valueList"></select></div>
                        </div>
                        <div ng-switch-when="DATE">
                            
                            <div class="col-xs-2 t_r pt7 g9"><span class="red" ng-if="obj.mandatory==true">*</span>{{obj.name || '无'}}</div>
                            <div class="col-xs-10">
                                <div class="qiyi-group wd160">
                                    <input type="datetime" class="form-control" placeholder="{{obj.placeholder}}" date-time ng-model="sampleDate" view="date"  step="5" auto-close="true">
                                    <span class="abs_r"><i class="iconfont icon-rili"></i></span>
                                </div>
                            </div>
                        </div>

                        <div ng-switch-when="ATTACHMENT">
                            
                            <div class="col-xs-2 t_r pt7 g9"><span class="red" ng-if="obj.mandatory==true">*</span>{{obj.name || '无'}}</div>
                            <div class="col-xs-10"><a websim-uploader divid='upload{{$index + 1}}'  type="image" options="upheadoptions"  upload-success="uploadSuccess(file,response)" upload-error="uploadError(file,reason)" ></a></div>
                        </div>
                        <div ng-switch-when="CHECKBOX">
                            
                            <div class="col-xs-2 t_r pt7 g9"><span class="red" ng-if="obj.mandatory==true">*</span>{{obj.name || '无'}}</div>
                            <div class="col-xs-10 pt5">
                                <label class="mr10" ng-repeat="data in obj.valueList"><input icheck type="checkbox" ng-model="data.value"> {{data.value}}</label>
                            </div>
                        </div>
                        <div ng-switch-when="RADIO">
                            
                            <div class="col-xs-2 t_r pt7 g9"><span class="red" ng-if="obj.mandatory==true">*</span>{{obj.name || '无'}}</div>
                            <div class="col-xs-10 pt5">
                                <label class="mr10" ng-repeat="data in obj.valueList"><input icheck type="radio" ng-model="data.value"> {{data.value}}</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--<div class="pct60 f12">
                <div class="cf mb10">
                    <div class="col-xs-2 t_r pt7 g9">单文本框</div>
                    <div class="col-xs-10 form-inline"><input type="text" class="form-control" placeholder="单文本框" ng-model="obj.value"></div>
                </div>
            </div>-->
        </div>


        <div class="nose-panel-body">
            <table class="table table-hover bte bbe tr" cellspacing="0" cellpadding="0" width="100%;">
                <thead>
                <tr>
                    <th width="80"><span class="pl15">排序</span></th>
                    <th>级别</th>
                    <th width="120">审批人</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in processmodal.processDefStepDTOList | orderBy:data.stepNo">
                    <td class="pl20"><span class="pl5">{{data.stepNo=$index+1}}</span></td>
                    <td>{{data.stepName}}</td>
                    <td>{{data.userDTO.name}}</span></td>
                </tr>
                </tbody>
            </table>

        </div>
        <div class="nose-panel-footer cf">
            <button class="btn btn-default wd80" ui-sref="processmsg.mypcs">取消</button>
            <button class="btn btn-primary wd80" ng-click="createProcessFun()">提交</button>
        </div>
    </div>



    <!-- Footer -->
    <div ng-include="'modules/common/footer.html'"></div>
</div>
